// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension Paths {
    public static var repositories: Repositories {
        Repositories(path: "/repositories")
    }

    public struct Repositories {
        /// Path: `/repositories`
        public let path: String

        /// List public repositories
        ///
        /// Lists all public repositories in the order that they were created.
        /// 
        /// Note:
        /// - For GitHub Enterprise Server, this endpoint will only list repositories available to all users on the enterprise.
        /// - Pagination is powered exclusively by the `since` parameter. Use the [Link header](https://docs.github.com/rest/overview/resources-in-the-rest-api#link-header) to get the URL for the next page of repositories.
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/repos#list-public-repositories)
        public func get(since: Int? = nil) -> Request<[GitHubAPI.MinimalRepository]> {
            Request(method: "GET", url: path, query: makeGetQuery(since), id: "repos/list-public")
        }

        public enum GetResponseHeaders {
            public static let link = HTTPHeader<String>(field: "Link")
        }

        private func makeGetQuery(_ since: Int?) -> [(String, String?)] {
            let encoder = URLQueryEncoder()
            encoder.encode(since, forKey: "since")
            return encoder.items
        }
    }
}
