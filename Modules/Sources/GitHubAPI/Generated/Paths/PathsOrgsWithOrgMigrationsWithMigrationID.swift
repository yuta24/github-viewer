// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension Paths.Orgs.WithOrg.Migrations {
    public func migrationID(_ migrationID: Int) -> WithMigrationID {
        WithMigrationID(path: "\(path)/\(migrationID)")
    }

    public struct WithMigrationID {
        /// Path: `/orgs/{org}/migrations/{migration_id}`
        public let path: String

        /// Get an organization migration status
        ///
        /// Fetches the status of a migration.
        /// 
        /// The `state` of a migration can be one of the following values:
        /// 
        /// *   `pending`, which means the migration hasn't started yet.
        /// *   `exporting`, which means the migration is in progress.
        /// *   `exported`, which means the migration finished successfully.
        /// *   `failed`, which means the migration failed.
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/migrations#get-an-organization-migration-status)
        public func get(exclude: [Exclude]? = nil) -> Request<GitHubAPI.Migration> {
            Request(method: "GET", url: path, query: makeGetQuery(exclude), id: "migrations/get-status-for-org")
        }

        private func makeGetQuery(_ exclude: [Exclude]?) -> [(String, String?)] {
            let encoder = URLQueryEncoder()
            encoder.encode(exclude, forKey: "exclude")
            return encoder.items
        }

        /// Allowed values that can be passed to the exclude param.
        ///
        /// Example: "repositories"
        public enum Exclude: String, Codable, CaseIterable {
            case repositories
        }
    }
}
