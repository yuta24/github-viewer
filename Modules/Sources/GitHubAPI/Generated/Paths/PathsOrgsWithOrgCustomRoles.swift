// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension Paths.Orgs.WithOrg {
    public var customRoles: CustomRoles {
        CustomRoles(path: path + "/custom_roles")
    }

    public struct CustomRoles {
        /// Path: `/orgs/{org}/custom_roles`
        public let path: String

        /// Create a custom role
        ///
        /// **Note**: This operation is in beta and is subject to change.
        /// 
        /// Creates a custom repository role that can be used by all repositories owned by the organization.
        /// 
        /// To use this endpoint the authenticated user must be an administrator for the organization and must use an access token with `admin:org` scope.
        /// GitHub Apps must have the `organization_custom_roles:write` organization permission to use this endpoint.
        /// 
        /// For more information on custom repository roles, see "[Managing custom repository roles for an organization](https://docs.github.com/organizations/managing-peoples-access-to-your-organization-with-roles/managing-custom-repository-roles-for-an-organization)."
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/orgs#create-a-custom-role)
        public func post(_ body: PostRequest) -> Request<GitHubAPI.OrganizationCustomRepositoryRole> {
            Request(method: "POST", url: path, body: body, id: "orgs/create-custom-role")
        }

        public struct PostRequest: Encodable {
            /// The name of the custom role.
            public var name: String
            /// A short description about the intended usage of this role or what permissions it grants.
            public var description: String?
            /// The system role from which this role inherits permissions.
            public var baseRole: BaseRole
            /// A list of additional permissions included in this role.
            public var permissions: [String]

            /// The system role from which this role inherits permissions.
            public enum BaseRole: String, Codable, CaseIterable {
                case read
                case triage
                case write
                case maintain
            }

            public init(name: String, description: String? = nil, baseRole: BaseRole, permissions: [String]) {
                self.name = name
                self.description = description
                self.baseRole = baseRole
                self.permissions = permissions
            }

            public func encode(to encoder: Encoder) throws {
                var values = encoder.container(keyedBy: StringCodingKey.self)
                try values.encode(name, forKey: "name")
                try values.encodeIfPresent(description, forKey: "description")
                try values.encode(baseRole, forKey: "base_role")
                try values.encode(permissions, forKey: "permissions")
            }
        }
    }
}
