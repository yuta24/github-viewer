// Generated by Create API
// https://github.com/CreateAPI/CreateAPI

import Foundation
import Get
import HTTPHeaders
import URLQueryEncoder

extension Paths.Repos.WithOwner.WithRepo.Pulls.WithPullNumber.Reviews.WithReviewID {
    public var dismissals: Dismissals {
        Dismissals(path: path + "/dismissals")
    }

    public struct Dismissals {
        /// Path: `/repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals`
        public let path: String

        /// Dismiss a review for a pull request
        ///
        /// **Note:** To dismiss a pull request review on a [protected branch](https://docs.github.com/rest/reference/repos#branches), you must be a repository administrator or be included in the list of people or teams who can dismiss pull request reviews.
        ///
        /// [API method documentation](https://docs.github.com/rest/reference/pulls#dismiss-a-review-for-a-pull-request)
        public func put(_ body: PutRequest) -> Request<GitHubAPI.PullRequestReview> {
            Request(method: "PUT", url: path, body: body, id: "pulls/dismiss-review")
        }

        public struct PutRequest: Encodable {
            /// The message for the pull request review dismissal
            public var message: String
            /// Example: "DISMISS"
            public var event: Event?

            /// Example: "DISMISS"
            public enum Event: String, Codable, CaseIterable {
                case dismiss = "DISMISS"
            }

            public init(message: String, event: Event? = nil) {
                self.message = message
                self.event = event
            }

            public func encode(to encoder: Encoder) throws {
                var values = encoder.container(keyedBy: StringCodingKey.self)
                try values.encode(message, forKey: "message")
                try values.encodeIfPresent(event, forKey: "event")
            }
        }
    }
}
